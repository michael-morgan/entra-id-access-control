@model UI.Modules.AccessControl.Models.AttributeSchemaViewModel

@{
    ViewData["Title"] = "Attribute Schema Details";
}

<div class="row mb-3">
    <div class="col-md-12">
        <h2>@ViewData["Title"]</h2>
        <p class="lead">View details of an attribute schema.</p>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-12">
        <div class="alert alert-info">
            <strong>Workstream:</strong> @ViewBag.SelectedWorkstream
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4>Schema Information</h4>
            </div>
            <div class="card-body">
                <div class="row mb-2">
                    <div class="col-md-3"><strong>ID:</strong></div>
                    <div class="col-md-9">@Model.Id</div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Workstream ID:</strong></div>
                    <div class="col-md-9">@Model.WorkstreamId</div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Attribute Level:</strong></div>
                    <div class="col-md-9">
                        <span class="badge bg-secondary">@Model.AttributeLevel</span>
                    </div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Attribute Name:</strong></div>
                    <div class="col-md-9">
                        <code>@Model.AttributeName</code>
                    </div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Display Name:</strong></div>
                    <div class="col-md-9">@Model.AttributeDisplayName</div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Data Type:</strong></div>
                    <div class="col-md-9">
                        <span class="badge bg-info">@Model.DataType</span>
                    </div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Is Required:</strong></div>
                    <div class="col-md-9">
                        @if (Model.IsRequired)
                        {
                            <span class="badge bg-warning">Required</span>
                        }
                        else
                        {
                            <span class="text-muted">Optional</span>
                        }
                    </div>
                </div>

                @if (!string.IsNullOrWhiteSpace(Model.DefaultValue))
                {
                    <div class="row mb-2">
                        <div class="col-md-3"><strong>Default Value:</strong></div>
                        <div class="col-md-9"><code>@Model.DefaultValue</code></div>
                    </div>
                }

                @if (!string.IsNullOrWhiteSpace(Model.AllowedValuesInput))
                {
                    <div class="row mb-2">
                        <div class="col-md-3"><strong>Allowed Values:</strong></div>
                        <div class="col-md-9">
                            @foreach (var value in Model.AllowedValuesInput.Split(',').Select(v => v.Trim()))
                            {
                                <span class="badge bg-light text-dark me-1">@value</span>
                            }
                        </div>
                    </div>
                }

                @if (!string.IsNullOrWhiteSpace(Model.ValidationRules))
                {
                    <div class="row mb-2">
                        <div class="col-md-3"><strong>Validation Rules (JSON):</strong></div>
                        <div class="col-md-9">
                            <pre class="border p-2 bg-light"><code>@Model.ValidationRules</code></pre>
                        </div>
                    </div>
                }

                @if (!string.IsNullOrWhiteSpace(Model.Description))
                {
                    <div class="row mb-2">
                        <div class="col-md-3"><strong>Description:</strong></div>
                        <div class="col-md-9">@Model.Description</div>
                    </div>
                }

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Display Order:</strong></div>
                    <div class="col-md-9">@Model.DisplayOrder</div>
                </div>

                <div class="row mb-2">
                    <div class="col-md-3"><strong>Is Active:</strong></div>
                    <div class="col-md-9">
                        @if (Model.IsActive)
                        {
                            <span class="badge bg-success">Active</span>
                        }
                        else
                        {
                            <span class="badge bg-danger">Inactive</span>
                        }
                    </div>
                </div>
            </div>
        </div>

        @if (Model.CreatedAt.HasValue || !string.IsNullOrWhiteSpace(Model.CreatedBy))
        {
            <div class="card mt-3">
                <div class="card-header">
                    <h5>Audit Information</h5>
                </div>
                <div class="card-body">
                    @if (Model.CreatedAt.HasValue)
                    {
                        <div class="row mb-2">
                            <div class="col-md-3"><strong>Created:</strong></div>
                            <div class="col-md-9">@Model.CreatedAt.Value.ToString("yyyy-MM-dd HH:mm:ss")</div>
                        </div>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.CreatedBy))
                    {
                        <div class="row mb-2">
                            <div class="col-md-3"><strong>Created By:</strong></div>
                            <div class="col-md-9">@Model.CreatedBy</div>
                        </div>
                    }
                    @if (Model.ModifiedAt.HasValue)
                    {
                        <div class="row mb-2">
                            <div class="col-md-3"><strong>Last Modified:</strong></div>
                            <div class="col-md-9">@Model.ModifiedAt.Value.ToString("yyyy-MM-dd HH:mm:ss")</div>
                        </div>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.ModifiedBy))
                    {
                        <div class="row mb-2">
                            <div class="col-md-3"><strong>Modified By:</strong></div>
                            <div class="col-md-9">@Model.ModifiedBy</div>
                        </div>
                    }
                </div>
            </div>
        }

        <div class="mt-3">
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">Edit</a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">Delete</a>
            <a asp-action="Index" class="btn btn-secondary">Back to List</a>
        </div>
    </div>
</div>
